<div class="container flscontainer">
    <fls-message-bar></fls-message-bar>
    <div class="col-md-12">
        <fls-busy-indicator busy="busy"
                            error="error">
            <div class="row col-md-12"
                 ng-show="error"
                 style="position:absolute;left:0;height:600px;z-index:9999;background-color: rgba(255,255,255,0.7);">
                <pre class="col-md-12"
                     ng-bind="error"></pre>
            </div>
            <form role="form"
                  name="planningForm"
                  ng-submit="save(planningDay)"
                  class="row col-md-12 css-form"
                  ng-class="{'readonly-form':!planningDay.CanUpdateRecord}">
                <div class="form-group">
                    <label for="date"><span translate="DATE">Date</span>:</label>
                    <fls-date-picker id="date"
                                     ng-model="planningDay.Day"
                                     ng-disabled="!planningDay.CanUpdateRecord"
                                     required></fls-date-picker>
                </div>
                <div class="form-group">
                    <label for="LocationId"><span translate="LOCATION">Location</span>:</label>

                    <selectize id="LocationId"
                               name="LocationId"
                               options="locations"
                               ng-disabled="!planningDay.CanUpdateRecord"
                               config="{
                                inputClass: 'form-control selectize-input',
                                maxItems: 1,
                                valueField: 'LocationId',
                                labelField: 'LocationName',
                                searchField: ['LocationName']
                            }"
                               ng-model="planningDay.LocationId"
                               required></selectize>
                </div>
                <div class="form-group">
                    <label for="remarks"><span translate="REMARKS">Remarks</span>:</label>
                    <input type="text"
                           class="form-control"
                           id="remarks"
                           ng-model="planningDay.Remarks"
                           ng-disabled="!planningDay.CanUpdateRecord">
                </div>
                <div class="form-group">
                    <label for="TowingPilotPersonId"><span translate="TOWING_PILOT">Towing Pilot</span>:</label>

                    <div class="input-group col-md-12">
                        <selectize name="TowingPilotPersonId"
                                   options="towingPilots"
                                   ng-disabled="!planningDay.CanUpdateRecord"
                                   config="{
                                    inputClass: 'form-control selectize-input',
                                    maxItems: 1,
                                    valueField: 'PersonId',
                                    searchField: ['Firstname', 'Lastname', 'City'],
                                    render: renderPerson
                                }"
                                   ng-model="planningDay.TowingPilotPersonId"></selectize>
                        <span class="input-group-btn"
                              ng-show="planningDay.CanUpdateRecord">
                            <button type="button"
                                    ng-click="planningDay.TowingPilotPersonId = undefined;"
                                    class="btn btn-default">Reset
                            </button>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="FlightOperatorPersonId"><span translate="FLIGHT_OPERATOR"></span>:</label>

                    <div class="input-group col-md-12">
                        <selectize name="FlightOperatorPersonId"
                                   options="gliderPilots"
                                   ng-disabled="!planningDay.CanUpdateRecord"
                                   config="{
                                    inputClass: 'form-control selectize-input',
                                    maxItems: 1,
                                    valueField: 'PersonId',
                                    searchField: ['Firstname', 'Lastname', 'City'],
                                    render: renderPerson
                                }"
                                   ng-model="planningDay.FlightOperatorPersonId"></selectize>
                        <span class="input-group-btn"
                              ng-show="planningDay.CanUpdateRecord">
                            <button type="button"
                                    ng-click="planningDay.FlightOperatorPersonId = undefined;"
                                    class="btn btn-default">Reset
                            </button>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="InstructorPersonId"><span translate="INSTRUCTOR"></span>:</label>

                    <div class="input-group col-md-12">
                        <selectize name="InstructorPersonId"
                                   options="instructors"
                                   ng-disabled="!planningDay.CanUpdateRecord"
                                   config="{
                                    inputClass: 'form-control selectize-input',
                                    maxItems: 1,
                                    valueField: 'PersonId',
                                    searchField: ['Firstname', 'Lastname', 'City'],
                                    render: renderPerson
                                }"
                                   ng-model="planningDay.InstructorPersonId"></selectize>
                        <span class="input-group-btn"
                              ng-show="planningDay.CanUpdateRecord">
                            <button type="button"
                                    ng-click="planningDay.InstructorPersonId = undefined;"
                                    class="btn btn-default">Reset
                            </button>
                        </span>
                    </div>
                </div>
                <div class="row">
                    <button type="button"
                            ng-click="cancel()"
                            class="btn btn-default pull-right"
                            translate="CANCEL">
                        Cancel
                    </button>
                    <button type="submit"
                            class="btn btn-default pull-right"
                            style="margin-right:10px;"
                            translate="SAVE"
                            ng-disabled="!planningDay.CanUpdateRecord || !planningForm.$valid">Save
                    </button>
                    <button type="button"
                            ng-click="edit()"
                            class="btn btn-default pull-right"
                            style="margin-right:10px;"
                            ng-show="!planningDay.CanUpdateRecord && editAllowed">
                        <span class="fa fa-pencil"></span>
                        Edit
                    </button>
                </div>
            </form>
            <div class="row">
                <h3><span translate="RESERVATIONS"></span>:</h3>

                <div>
                    <fls-reservations-table></fls-reservations-table>
                </div>
            </div>
            <div class="row hidden-print">
                <button type="button"
                        class="btn btn-default pull-right"
                        style="margin:10px;margin-right:0;"
                        ng-click="newReservation()"
                        translate="NEW"></button>
            </div>
            <div class="col-md-12"
                 ng-show="debug">
                <pre ng-bind="planningDay | json"
                     style="margin-top:20px;"></pre>
                <pre class="col-md-12"
                     ng-show="debug"
                     ng-bind="reservations | json"
                     style="margin-top:20px;"></pre>
                <pre class="col-md-6"
                     ng-show="debug"
                     ng-bind="towingPilots | json"
                     style="margin-top:20px;"></pre>
                <pre class="col-md-6"
                     ng-show="debug"
                     ng-bind="gliderPilots | json"
                     style="margin-top:20px;"></pre>
            </div>
        </fls-busy-indicator>
    </div>
</div>