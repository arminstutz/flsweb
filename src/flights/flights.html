<div class="container-fluid flscontainer">
    <button type="button" ng-click="newFlight()" class="btn btn-default pull-right hidden-print fls-table-new-button" translate="NEW">
    </button>
    <div>
        <h1 translate="FLIGHTS"></h1>
    </div>
    <div>
        <div class="col-md-12 col-sm-12 col-xs-12">
            <fls-busy-indicator busy="busy" error="error">
                <fls-message-bar></fls-message-bar>

                <table ng-table="tableParams" class="fls fls-table-with-details" show-filter="true">
                    <tr ng-repeat="flight in $data" ng-click="editFlight(flight)" title="{{'EDIT' | translate}}">
                        <td data-title="'STATUS' | translate" filter="{ _combinedAirState: 'text'}" sortable="'_combinedAirState'">
                            <fls-flight-status flight="flight"></fls-flight-status>
                        </td>
                        <td ng-bind="flight.StartDateTime | date:'dd.MM.yyyy'" data-title="'DATE' | translate" filter="{ StartDateTime: 'date'}" sortable="'StartDateTime'"></td>
                        <td ng-bind="flight.Immatriculation" data-title="'GLIDER_PLANE' | translate" filter="{ Immatriculation: 'text'}" sortable="'Immatriculation'"></td>
                        <td ng-bind="flight.PilotName" data-title="'GLIDER_PILOT' | translate" filter="{ PilotName: 'text'}" sortable="'PilotName'"></td>
                        <td ng-bind="flight.SecondCrewName" data-title="'SECOND_CREW_MEMBER' | translate" filter="{ SecondCrewName: 'text'}" sortable="'SecondCrewName'"></td>
                        <td ng-bind="flight.StartLocation" data-title="'START_LOCATION' | translate" filter="{ StartLocation: 'text'}" sortable="'StartLocation'"></td>
                        <td ng-bind="flight.StartDateTime | date:'HH:mm'" data-title="'TAKEOFF' | translate" filter="{ StartDateTime: 'text'}" sortable="'StartDateTime'"></td>
                        <td ng-bind="flight.LdgDateTime | date:'HH:mm'" data-title="'LANDING' | translate" filter="{ LdgDateTime: 'text'}" sortable="'LdgDateTime'"></td>
                        <td ng-bind="flight.GliderFlightDuration && ('0001-01-01T' + flight.GliderFlightDuration) | date:'HH:mm'" data-title="'GLIDER_FLIGHT_DURATION' | translate" sortable="'GliderFlightDuration'"></td>
                        <td ng-bind="flight.TowAircraftImmatriculation" data-title="'TOWING_PLANE' | translate" filter="{ TowAircraftImmatriculation: 'text'}" sortable="'TowAircraftImmatriculation'"></td>
                        <td ng-bind="flight.TowPilotName" data-title="'TOWING_PILOT' | translate" filter="{ TowPilotName: 'text'}" sortable="'TowPilotName'"></td>
                        <td ng-bind="flight.TowFlightLdgDateTime | date:'HH:mm'" data-title="'TOW_LANDING' | translate" filter="{ TowFlightLdgDateTime: 'text'}" sortable="'TowFlightLdgDateTime'"></td>
                        <td ng-bind="flight.TowFlightDuration && ('0001-01-01T' + flight.TowFlightDuration) | date:'HH:mm'" data-title="'TOW_DURATION' | translate" sortable="'TowFlightDuration'"></td>
                        <td ng-bind="flight.FlightComment" data-title="'COMMENT' | translate" filter="{ FlightComment: 'text'}" sortable="'FlightComment'"></td>
                        <td class="hidden-print controls-column">
                            <a ng-show="isClubAdmin"
                               title="{{'DELETE' | translate}}"
                               ng-click="delete(flight); $event.stopPropagation();"
                               class="col-xs-4 control-icon delete-link">
                                <span class="fa fa-trash-o"></span>
                            </a>
                            <a title="{{'COPY' | translate}}"
                               ng-click="copyFlight(flight); $event.stopPropagation();"
                               class="col-md-4 control-icon">
                                <span class="fa fa-files-o"></span>
                            </a>
                            <fls-history entity-name="Flight" entity-id="flight.FlightId"></fls-history>
                        </td>
                    </tr>
                </table>

                <div class="row col-md-12 col-sm-12 col-xs-12" ng-show="debug">
                    <div class="col-md-6">
                        <h2>gliderFlightTypes</h2>
                        <pre ng-show="gliderFlightTypes" ng-bind="gliderFlightTypes | json"></pre>
                    </div>
                    <div class="col-md-6">
                        <h2>towingFlightTypes</h2>
                        <pre ng-show="towingFlightTypes" ng-bind="towingFlightTypes | json"></pre>
                    </div>
                    <div class="col-md-12">
                        <h2>flightDetails</h2>
                        <pre ng-show="flightDetails" ng-bind="flightDetails | json"></pre>
                    </div>
                    <div class="col-md-12">
                        <h2>gliderAircrafts</h2>
                        <pre ng-show="gliderAircrafts" ng-bind="gliderAircrafts | json"></pre>
                    </div>
                    <div class="col-md-12">
                        <h2>flights</h2>
                        <pre ng-show="flights" ng-bind="flights | json"></pre>
                    </div>
                </div>
            </fls-busy-indicator>
        </div>
    </div>
</div>
